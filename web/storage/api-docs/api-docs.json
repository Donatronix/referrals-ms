{
    "openapi": "3.0.0",
    "info": {
        "title": "Referral API",
        "description": "This is API Microservice Referral Program",
        "contact": {
            "name": "Support Team",
            "email": "bibrkacity@gmail.com"
        },
        "version": "1.0"
    },
    "paths": {
        "/api/v1/referral/analytics/byLink": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Get analytics for referral link",
                "description": "Get analytics for referral link",
                "parameters": [
                    {
                        "name": "user-id",
                        "in": "header",
                        "description": "User ID",
                        "required": true,
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "package_name",
                        "in": "query",
                        "description": "Package Name",
                        "required": false,
                        "schema": {
                            "type": "string"
                        },
                        "example": "net.sumra.chat"
                    },
                    {
                        "name": "dynamic_link",
                        "in": "query",
                        "description": "Dynamic Link",
                        "schema": {
                            "type": "string"
                        },
                        "example": "https://smr.page.link/MD7S"
                    },
                    {
                        "name": "duration_days",
                        "in": "query",
                        "description": "Duration in days",
                        "schema": {
                            "type": "string"
                        },
                        "example": "14"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success getting analytics for referral link"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "400": {
                        "description": "Invalid request"
                    },
                    "404": {
                        "description": "not found"
                    }
                }
            }
        },
        "/api/v1/referral/analytics/unregistered": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Get unregistered users (by referral code)",
                "description": "Get unregistered users. If send referral code then get list by refcode",
                "operationId": "App\\Api\\V1\\Controllers\\AnalyticsController::unregistered",
                "parameters": [
                    {
                        "name": "referrer_code",
                        "in": "query",
                        "description": "Referrer code",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success getting unregistered users (by referral code)"
                    },
                    "400": {
                        "description": "Invalid request"
                    }
                }
            }
        },
        "/api/v1/referral": {
            "get": {
                "tags": [
                    "Main"
                ],
                "summary": "List all referrals for user",
                "description": "List all referrals for user",
                "parameters": [
                    {
                        "name": "user-id",
                        "in": "header",
                        "description": "User ID",
                        "required": true,
                        "schema": {
                            "type": "number"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success join new user to referrer user"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "400": {
                        "description": "Invalid request"
                    },
                    "404": {
                        "description": "not found"
                    }
                }
            },
            "post": {
                "tags": [
                    "Main"
                ],
                "summary": "Join new user to referrer",
                "description": "Send encryption data: username - New User Name, * package_name (required) - Package Name, referrer_code - Referrer code, * device_id (required) - User Device ID, * device_name (required) - User Device Name",
                "parameters": [
                    {
                        "name": "user-id",
                        "in": "header",
                        "description": "New User ID",
                        "required": false,
                        "schema": {
                            "type": "number"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "version_key": {
                                        "description": "Version Key",
                                        "type": "string",
                                        "example": "66981685"
                                    },
                                    "data": {
                                        "description": "Encrypt data",
                                        "type": "text",
                                        "example": ""
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success send data"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "400": {
                        "description": "Invalid request"
                    },
                    "404": {
                        "description": "not found"
                    }
                }
            }
        },
        "/api/v1/referral/invite": {
            "get": {
                "tags": [
                    "Main"
                ],
                "summary": "Get user invite code",
                "description": "Get user referrer invite code",
                "parameters": [
                    {
                        "name": "user-id",
                        "in": "header",
                        "description": "User ID",
                        "required": true,
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "package_name",
                        "in": "query",
                        "description": "Package Name",
                        "required": false,
                        "schema": {
                            "type": "string"
                        },
                        "example": "net.sumra.chat"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success get or generate referrer invite code"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "400": {
                        "description": "Invalid request"
                    },
                    "404": {
                        "description": "not found"
                    }
                }
            }
        },
        "/api/v1/referral/manager/validate/user": {
            "post": {
                "tags": [
                    "Management"
                ],
                "summary": "Validate user install app",
                "description": "Validate user install app",
                "operationId": "App\\Api\\V1\\Controllers\\ManagementController::validateUser",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "user_id": {
                                        "description": "Sumra User ID",
                                        "type": "integer",
                                        "example": "669"
                                    },
                                    "application_id": {
                                        "description": "Application ID",
                                        "type": "integer",
                                        "example": "2"
                                    },
                                    "status": {
                                        "description": "Status (Approve, Reject, etc)",
                                        "type": "integer",
                                        "example": "1"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "User successfull validated"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "400": {
                        "description": "Invalid request"
                    },
                    "404": {
                        "description": "not found"
                    }
                }
            }
        },
        "/api/v1/referral/manager/validate/referrer": {
            "post": {
                "tags": [
                    "Management"
                ],
                "summary": "Validate referrer",
                "description": "Validate referrer",
                "operationId": "App\\Api\\V1\\Controllers\\ManagementController::validateReferrer",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "referrer_id": {
                                        "description": "Referrer ID",
                                        "type": "integer",
                                        "example": "69"
                                    },
                                    "application_id": {
                                        "description": "Application ID",
                                        "type": "integer",
                                        "example": "2"
                                    },
                                    "status": {
                                        "description": "Status (Approve, Reject, etc)",
                                        "type": "integer",
                                        "example": "1"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfull validated"
                    },
                    "400": {
                        "description": "Invalid request"
                    }
                }
            }
        }
    }
}